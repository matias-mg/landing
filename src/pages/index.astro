---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import Hero from "../components/Hero.astro";
import Experience from "../components/Experience.astro";
import Technologies from "../components/Technologies.astro";
import Footer from "../components/Footer.astro";
import { getLangFromUrl, useTranslations } from "../i18n/utils";
import { defaultLang } from "../i18n/ui";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const localeToUse = Astro.preferredLocale || defaultLang;
---

{
	localeToUse !== defaultLang ? (
		<meta http-equiv="refresh" content={`0;url=/${localeToUse}/`} />
	) : (
		<Layout title={t("site.title")} description={t("site.description")}>
			<main class="relative overflow-clip transition-all">
				<Header />
				<div id="about-me" class="px-4 pb-12 md:px-8">
					<Hero />
					<Experience />
					<Technologies />
				</div>
				<Footer />
			</main>
		</Layout>
	)
}
